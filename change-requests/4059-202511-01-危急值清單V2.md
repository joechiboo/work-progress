製表日期： 114 年 11 月 28 日                  紀錄編號：4059-202511-01
部門名稱：資訊部                              填表人員：紀伯喬

變更項目：危急值清單 V2 - 全面重設計

預定執行期程：自 114 年 11 月 03 日 至 114 年 12 月 30 日止

---

## 變更需求

變更原因及內容說明：

原危急值清單功能已無法滿足現行作業需求，需進行全面改版升級。

**變更原因：**
1. 現有危急值清單缺乏自動審核機制，醫檢師需逐筆人工確認，效率低下
2. 特殊檢驗碼（如 RPR/TPPA 梅毒配對、退伍軍人桿菌、黴漿菌抗體等）缺乏自動判讀邏輯
3. 查詢效能不佳，使用 REGEXP_LIKE 導致 Oracle 查詢緩慢
4. 缺乏雙人覆核機制，不符合實驗室品質管理要求

**變更內容：**
1. 實作醫檢師確認自動審核危急值機制，支援批次確認
2. 新增第二位醫檢師覆核機制（雙人覆核流程）
3. 實作特殊檢驗碼判讀邏輯：
   - RPR/TPPA（2001/2018）梅毒配對邏輯
   - 退伍軍人桿菌（Legionella）、黴漿菌（Mycoplasma 2319）抗體判讀
   - Widal Test、淋病 DNA（4616）危報規則
   - 數值格式轉換（如 "1:256(+)" 提取）
4. 移除 REGEXP_LIKE，改用簡化值轉換邏輯提升查詢效能
5. 新增 Excel 匯出功能
6. 權限載入時機修正，確保頁面初始化時正確載入使用者權限

**影響範圍：** lisweb 系統危急值清單模組（DangerListV2）

申請人員：紀伯喬

---

## 變更評估

**影響分析：**
- 影響模組：lisweb - 危急值清單 V2（DangerListV2）
- 影響頁面：危急值清單查詢頁、醫檢師確認介面
- 資料庫：涉及危急值相關資料表查詢邏輯調整（移除 REGEXP_LIKE）
- 無需停機，屬於功能新增與效能優化
- 備份作業：部署前備份現有 DLL 及相關設定檔
- 變更失敗處理：回復至前一版本 DLL

評估人員：紀伯喬

---

## 變更處理

已依原規劃方式完成變更作業：
1. 完成自動審核機制實作與測試（88+ commits）
2. 雙人覆核流程已上線運作
3. 特殊檢驗碼判讀邏輯全數通過驗證
4. 查詢效能提升（移除 REGEXP_LIKE 後查詢時間縮短）
5. Excel 匯出功能正常運作

執行人員：紀伯喬

---

## 結果確認

已確認依照原規劃方式執行變更，危急值清單 V2 功能正常運作，自動審核及雙人覆核流程符合預期。

確認人員：

安全測試結果：
☒ 無須進行測試
